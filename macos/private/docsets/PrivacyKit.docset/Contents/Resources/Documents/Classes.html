<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Classes  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>

    <a name="//apple_ref/swift/Section/Classes" class="dashAnchor"></a>

    <a title="Classes  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
          PrivacyKit Docs
        </a>
         (99% documented)
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/AppPETs/PrivacyKit">
            <img class="header-icon" src="img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html">PrivacyKit Reference</a>
      <img class="carat" src="img/carat.png" />
      Classes  Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/ConfidentialQrCodeView.html">ConfidentialQrCodeView</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Http.html">Http</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Http/Error.html">– Error</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Http/Method.html">– Method</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Http/StatusCategory.html">– StatusCategory</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Http/Status.html">– Status</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Http/Header.html">– Header</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Http/ContentType.html">– ContentType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Http/Message.html">– Message</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Http/Request.html">– Request</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Http/Response.html">– Response</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Indicators.html">Indicators</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/PairedStream.html">PairedStream</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/PrivacyService.html">PrivacyService</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/PrivacyService/Options.html">– Options</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/PrivacyService/KeyValueStorage.html">– KeyValueStorage</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/RegularExpression.html">RegularExpression</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SecureKeyValueStorage.html">SecureKeyValueStorage</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SecureKeyValueStorage/Error.html">– Error</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Shalon.html">Shalon</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Shalon/State.html">– State</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/ShalonURLProtocol.html">ShalonURLProtocol</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/ShalonURLProtocol/ParseError.html">– ParseError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/ShalonURLProtocol/Parameters.html">– Parameters</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TLSInputStream.html">TLSInputStream</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TLSOutputStream.html">TLSOutputStream</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TlsSession.html">TlsSession</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/WrappedInputStream.html">WrappedInputStream</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/WrappedOutputStream.html">WrappedOutputStream</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Global Variables.html">Global Variables</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Global Variables.html#/s:10PrivacyKit16ChunkSizeInBytes33_CFF75C00828C0134E7FA8E500ED707D2LLSivp">ChunkSizeInBytes</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Global Variables.html#/s:10PrivacyKit17MASTER_KEY_PREFIXSSvp">MASTER_KEY_PREFIX</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Global Variables.html#/s:10PrivacyKit31MASTER_KEY_PREFIX_SIZE_IN_BYTESSivp">MASTER_KEY_PREFIX_SIZE_IN_BYTES</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/AuthenticationError.html">AuthenticationError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/GenericError.html">GenericError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/TlsStreamError.html">TlsStreamError</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/HTTPURLResponse.html">HTTPURLResponse</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/InputStream.html">InputStream</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/MasterKey.html">MasterKey</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/OutputStream.html">OutputStream</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/URLRequest.html">URLRequest</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Functions.html">Functions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:10PrivacyKit2etoiySbSS_AA17RegularExpressionCtF">=~(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:10PrivacyKit2etoiySbSS_SStF">=~(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:10PrivacyKit23authenticateDeviceOwner6reason10completionSo9LAContextCSS_yAA19AuthenticationErrorOSgctF">authenticateDeviceOwner(reason:completion:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:10PrivacyKit7tlsRead33_CFF75C00828C0134E7FA8E500ED707D2LL13connectionPtr04dataN00o6LengthN0s5Int32VSV_SvSpySiGtF">tlsRead(connectionPtr:dataPtr:dataLengthPtr:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:10PrivacyKit8tlsWrite33_CFF75C00828C0134E7FA8E500ED707D2LL13connectionPtr04dataN00o6LengthN0s5Int32VSV_SVSpySiGtF">tlsWrite(connectionPtr:dataPtr:dataLengthPtr:)</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/KeyValueStorage.html">KeyValueStorage</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/KeyValueStorageBackend.html">KeyValueStorageBackend</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/TlsSessionDelegate.html">TlsSessionDelegate</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/EncryptedKey.html">EncryptedKey</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/Target.html">Target</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Typealiases.html">Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Typealiases.html#/s:10PrivacyKit21AuthenticationContexta">AuthenticationContext</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Typealiases.html#/s:10PrivacyKit14EncryptedValuea">EncryptedValue</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Typealiases.html#/Image">Image</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Typealiases.html#/s:10PrivacyKit5Imagea">Image</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Typealiases.html#/ImageView">ImageView</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Typealiases.html#/s:10PrivacyKit9ImageViewa">ImageView</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content">
            <h1>Classes</h1>
            <p>The following classes are available globally.</p>

          </div>
        </section>

        <section class="section">
          <div class="section-content">
            <div class="task-group">
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:10PrivacyKit4HttpC"></a>
                    <a name="//apple_ref/swift/Class/Http" class="dashAnchor"></a>
                    <a class="token" href="#/s:10PrivacyKit4HttpC">Http</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>A class that mainly acts as a namespace for HTTP-related functionality.</p>

                        <a href="Classes/Http.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">class</span> <span class="kt">Http</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/AppPETs/PrivacyKit/blob/a1b73a6dd5a61a4a07e216bc11ea89f8f5c2f54b/PrivacyKit/Http.swift#L7-L454">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <div class="task-name-container">
                <a name="/Encryption"></a>
                <a name="//apple_ref/swift/Section/Encryption" class="dashAnchor"></a>
                <a href="#/Encryption">
                  <h3 class="section-name">Encryption</h3>
                </a>
              </div>
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:10PrivacyKit21SecureKeyValueStorageC"></a>
                    <a name="//apple_ref/swift/Class/SecureKeyValueStorage" class="dashAnchor"></a>
                    <a class="token" href="#/s:10PrivacyKit21SecureKeyValueStorageC">SecureKeyValueStorage</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>This class offers a key-value storage, where the values are encrypted and
the keys are hashed, with a private hashing function. The key-value storage
backend cannot link keys or values with others, assuming there are multiple
users, using the same backend. If a network is used, an anonymous
communication network should be used in order to avoid linkability through
traffic data.</p>
<div class="aside aside-warning">
    <p class="aside-title">Warning</p>
    <p>The values are not protected by padding, meaning that the backend
provider could still guess the content based on its size.</p>

</div>
<div class="aside aside-warning">
    <p class="aside-title">Warning</p>
    <p>There is no access protection of the keys. The sole protection is, that
nobody can get your keys. The values are protected by encryption, so
confidentiality and integrity are protected, but availability is not.
The backend provider, who knows which keys are stored in the backend,
could delete or overwrite them.</p>

</div>

                        <a href="Classes/SecureKeyValueStorage.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">class</span> <span class="kt">SecureKeyValueStorage</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/AppPETs/PrivacyKit/blob/a1b73a6dd5a61a4a07e216bc11ea89f8f5c2f54b/PrivacyKit/KeyValueStorage.swift#L255-L440">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:10PrivacyKit0A7ServiceC"></a>
                    <a name="//apple_ref/swift/Class/PrivacyService" class="dashAnchor"></a>
                    <a class="token" href="#/s:10PrivacyKit0A7ServiceC">PrivacyService</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Class that acts as an interface to the web service API.</p>

                        <a href="Classes/PrivacyService.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">class</span> <span class="kt">PrivacyService</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/AppPETs/PrivacyKit/blob/a1b73a6dd5a61a4a07e216bc11ea89f8f5c2f54b/PrivacyKit/PrivacyService.swift#L4-L60">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:10PrivacyKit17RegularExpressionC"></a>
                    <a name="//apple_ref/swift/Class/RegularExpression" class="dashAnchor"></a>
                    <a class="token" href="#/s:10PrivacyKit17RegularExpressionC">RegularExpression</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>This class represents a compiled regular expression.</p>
<div class="aside aside-see">
    <p class="aside-title">See</p>
    Taken from <a href="http://benscheirman.com/2014/06/regex-in-swift/">http://benscheirman.com/2014/06/regex-in-swift/</a>

</div>

                        <a href="Classes/RegularExpression.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">class</span> <span class="kt">RegularExpression</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/AppPETs/PrivacyKit/blob/a1b73a6dd5a61a4a07e216bc11ea89f8f5c2f54b/PrivacyKit/RegularExpression.swift#L52-L98">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/c:@M@PrivacyKit@objc(cs)Shalon"></a>
                    <a name="//apple_ref/swift/Class/Shalon" class="dashAnchor"></a>
                    <a class="token" href="#/c:@M@PrivacyKit@objc(cs)Shalon">Shalon</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>With this class you can connect to a target through a
<a href="http://dx.doi.org/10.1109/ICCCN.2009.5235258">Shalon</a> proxy. Connections to
the proxy and connections to the target will each be encrypted using TLS.
This means that your ISP or other people in your network cannot observe to
which target you connect, because they only see connections to the proxy.
The proxy itself does not see the content of your requests to the target.
The target will only see the proxy&rsquo;s IP address (except if the IP address is
otherwise embedded into the request).</p>

<p>This implementation supports multiple hops. Simply add other layers.</p>

<p>In order to use Shalon proxies with your <code>URLSession</code> connections, please
take look at <code><a href="Classes/ShalonURLProtocol.html">ShalonURLProtocol</a></code>.</p>
<h2 id='examples' class='heading'>Examples</h2>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">proxy1</span> <span class="o">=</span> <span class="kt">Target</span><span class="p">(</span><span class="nv">withHostname</span><span class="p">:</span> <span class="s">"shalon1.jondonym.net"</span><span class="p">,</span> <span class="nv">andPort</span><span class="p">:</span> <span class="mi">443</span><span class="p">)</span><span class="o">!</span>
<span class="k">let</span> <span class="nv">proxy2</span> <span class="o">=</span> <span class="kt">Target</span><span class="p">(</span><span class="nv">withHostname</span><span class="p">:</span> <span class="s">"shalon2.jondonym.net"</span><span class="p">,</span> <span class="nv">andPort</span><span class="p">:</span> <span class="mi">443</span><span class="p">)</span><span class="o">!</span>
<span class="k">let</span> <span class="nv">proxy3</span> <span class="o">=</span> <span class="kt">Target</span><span class="p">(</span><span class="nv">withHostname</span><span class="p">:</span> <span class="s">"shalon3.jondonym.net"</span><span class="p">,</span> <span class="nv">andPort</span><span class="p">:</span> <span class="mi">443</span><span class="p">)</span><span class="o">!</span>
<span class="k">let</span> <span class="nv">target</span> <span class="o">=</span> <span class="kt">Target</span><span class="p">(</span><span class="nv">withHostname</span><span class="p">:</span> <span class="s">"www.example.com"</span><span class="p">,</span> <span class="nv">andPort</span><span class="p">:</span> <span class="mi">443</span><span class="p">)</span><span class="o">!</span>

<span class="k">let</span> <span class="nv">shalon</span> <span class="o">=</span> <span class="kt">Shalon</span><span class="p">(</span><span class="nv">withTarget</span><span class="p">:</span> <span class="n">target</span><span class="p">)</span>

<span class="n">shalon</span><span class="o">.</span><span class="nf">addLayer</span><span class="p">(</span><span class="n">proxy3</span><span class="p">)</span>
<span class="n">shalon</span><span class="o">.</span><span class="nf">addLayer</span><span class="p">(</span><span class="n">proxy2</span><span class="p">)</span>
<span class="n">shalon</span><span class="o">.</span><span class="nf">addLayer</span><span class="p">(</span><span class="n">proxy1</span><span class="p">)</span>

<span class="n">shalon</span><span class="o">.</span><span class="nf">issue</span><span class="p">(</span><span class="nv">request</span><span class="p">:</span> <span class="kt">Request</span><span class="p">(</span><span class="nv">withMethod</span><span class="p">:</span> <span class="o">.</span><span class="n">head</span><span class="p">,</span> <span class="nv">andUrl</span><span class="p">:</span> <span class="n">url</span><span class="p">)</span><span class="o">!</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">optionalResponse</span><span class="p">,</span> <span class="n">optionalError</span> <span class="k">in</span>
    <span class="c1">// TODO Do something</span>
<span class="p">}</span>
</code></pre>

<p>This will establish a nested tunnel, where <code>proxy1</code> cannot see what the
<code>client</code> sends to <code>proxy2</code>, as depicted:</p>
<pre class="highlight swift"><code><span class="n">client</span>           <span class="n">proxy1</span>           <span class="n">proxy2</span>           <span class="n">proxy3</span>          <span class="n">target</span>
<span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>               <span class="o">|</span>
<span class="o">+----------------+</span>                <span class="o">|</span>                <span class="o">|</span>               <span class="o">|</span>
<span class="o">|</span> <span class="kt">CONNECT</span> <span class="n">proxy2</span> <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>               <span class="o">|</span>
<span class="o">+---------------------------------+</span>                <span class="o">|</span>               <span class="o">|</span>
<span class="o">|</span>                  <span class="kt">CONNECT</span> <span class="n">proxy3</span> <span class="o">|</span>                <span class="o">|</span>               <span class="o">|</span>
<span class="o">+--------------------------------------------------+</span>               <span class="o">|</span>
<span class="o">|</span>                                   <span class="kt">CONNECT</span> <span class="n">proxy4</span> <span class="o">|</span>               <span class="o">|</span>
<span class="o">+------------------------------------------------------------------+</span>
<span class="o">|</span>                                                    <span class="kt">HEAD</span> <span class="o">/</span>        <span class="o">|</span>
<span class="o">+------------------------------------------------------------------+</span>
<span class="o">|</span>                                                  <span class="o">|</span>               <span class="o">|</span>
<span class="o">+--------------------------------------------------+</span>               <span class="o">|</span>
<span class="o">|</span>                                 <span class="o">|</span>                <span class="o">|</span>               <span class="o">|</span>
<span class="o">+---------------------------------+</span>                <span class="o">|</span>               <span class="o">|</span>
<span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>               <span class="o">|</span>
<span class="o">+----------------+</span>                <span class="o">|</span>                <span class="o">|</span>               <span class="o">|</span>
<span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>               <span class="o">|</span>
</code></pre>

                        <a href="Classes/Shalon.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">class</span> <span class="kt">Shalon</span> <span class="p">:</span> <span class="kt">NSObject</span><span class="p">,</span> <span class="kt">StreamDelegate</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/AppPETs/PrivacyKit/blob/a1b73a6dd5a61a4a07e216bc11ea89f8f5c2f54b/PrivacyKit/Shalon.swift#L74-L545">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/c:@M@PrivacyKit@objc(cs)ShalonURLProtocol"></a>
                    <a name="//apple_ref/swift/Class/ShalonURLProtocol" class="dashAnchor"></a>
                    <a class="token" href="#/c:@M@PrivacyKit@objc(cs)ShalonURLProtocol">ShalonURLProtocol</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>A <a href="https://developer.apple.com/documentation/foundation/urlprotocol"><code>URLProtocol</code></a>
that adds support for Shalon by specifying URLs in the following format:
<code>httpss://proxy:port/target:port/index.html</code>. To use more than one proxy
(up to three), e.g., use <code>httpssss://proxy1/proxy2/proxy3/target/index.html</code>
for connecting via three proxies.</p>

<p>In order to support the protocol, it needs to be added to the
<code>URLSessionConfiguration</code> first:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">configuration</span> <span class="o">=</span> <span class="kt">URLSessionConfiguration</span><span class="o">.</span><span class="n">ephemeral</span>
<span class="n">configuration</span><span class="o">.</span><span class="n">protocolClasses</span><span class="p">?</span><span class="o">.</span><span class="nf">append</span><span class="p">(</span><span class="kt">ShalonURLProtocol</span><span class="o">.</span><span class="k">self</span><span class="p">)</span>
</code></pre>
<h2 id='examples' class='heading'>Examples</h2>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">configuration</span> <span class="o">=</span> <span class="kt">URLSessionConfiguration</span><span class="o">.</span><span class="n">ephemeral</span>
<span class="n">configuration</span><span class="o">.</span><span class="n">protocolClasses</span><span class="p">?</span><span class="o">.</span><span class="nf">append</span><span class="p">(</span><span class="kt">ShalonURLProtocol</span><span class="o">.</span><span class="k">self</span><span class="p">)</span>

<span class="k">let</span> <span class="nv">session</span> <span class="o">=</span> <span class="kt">URLSession</span><span class="p">(</span><span class="nv">configuration</span><span class="p">:</span> <span class="n">configuration</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">url</span> <span class="o">=</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"httpss://shalon1.jondonym.net/example.com/"</span><span class="p">)</span><span class="o">!</span>
<span class="k">let</span> <span class="nv">task</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="nf">dataTask</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="n">url</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">optionalUrl</span><span class="p">,</span> <span class="n">optionalResponse</span><span class="p">,</span> <span class="n">optionalError</span> <span class="k">in</span>

    <span class="c1">// Handle response</span>
<span class="p">}</span>
</code></pre>

                        <a href="Classes/ShalonURLProtocol.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">class</span> <span class="kt">ShalonURLProtocol</span> <span class="p">:</span> <span class="kt">URLProtocol</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/AppPETs/PrivacyKit/blob/a1b73a6dd5a61a4a07e216bc11ea89f8f5c2f54b/PrivacyKit/ShalonURLProtocol.swift#L31-L298">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:10PrivacyKit12PairedStreamC"></a>
                    <a name="//apple_ref/swift/Class/PairedStream" class="dashAnchor"></a>
                    <a class="token" href="#/s:10PrivacyKit12PairedStreamC">PairedStream</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>This is a convenience class to tie input and output streams together. If a
tunnel with multiple hops is established, each hop will have separate input
and output streams.</p>

<p>The API is similar to the <a href="https://developer.apple.com/documentation/foundation/stream"><code>Stream</code></a>
class.</p>

                        <a href="Classes/PairedStream.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">class</span> <span class="kt">PairedStream</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/AppPETs/PrivacyKit/blob/a1b73a6dd5a61a4a07e216bc11ea89f8f5c2f54b/PrivacyKit/Tls.swift#L146-L220">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:10PrivacyKit10TlsSessionC"></a>
                    <a name="//apple_ref/swift/Class/TlsSession" class="dashAnchor"></a>
                    <a class="token" href="#/s:10PrivacyKit10TlsSessionC">TlsSession</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>This class represents a TLS session. It manages the context for the session,
which is used for input as well as output streams.</p>

                        <a href="Classes/TlsSession.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">class</span> <span class="kt">TlsSession</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/AppPETs/PrivacyKit/blob/a1b73a6dd5a61a4a07e216bc11ea89f8f5c2f54b/PrivacyKit/Tls.swift#L226-L396">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/c:@M@PrivacyKit@objc(cs)WrappedInputStream"></a>
                    <a name="//apple_ref/swift/Class/WrappedInputStream" class="dashAnchor"></a>
                    <a class="token" href="#/c:@M@PrivacyKit@objc(cs)WrappedInputStream">WrappedInputStream</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>This class wraps an input stream.</p>

<p>This somehow helps handling input streams. Looks like one cannot direcly
use a sub-classed input stream, so there is a stream kept as an internal
variable. In addition there is a computed property to return this variable.
That way it can be overwritten by sub classe. Maybe there is a better way to
handle this.</p>
<div class="aside aside-see">
    <p class="aside-title">See</p>
    <a href="https://developer.apple.com/documentation/foundation/inputstream"><code>InputStream</code></a>

</div>

                        <a href="Classes/WrappedInputStream.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">class</span> <span class="kt">WrappedInputStream</span> <span class="p">:</span> <span class="kt">InputStream</span><span class="p">,</span> <span class="kt">StreamDelegate</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/AppPETs/PrivacyKit/blob/a1b73a6dd5a61a4a07e216bc11ea89f8f5c2f54b/PrivacyKit/Tls.swift#L410-L624">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/c:@M@PrivacyKit@objc(cs)WrappedOutputStream"></a>
                    <a name="//apple_ref/swift/Class/WrappedOutputStream" class="dashAnchor"></a>
                    <a class="token" href="#/c:@M@PrivacyKit@objc(cs)WrappedOutputStream">WrappedOutputStream</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>This class wraps an output stream.</p>

<p>This somehow helps handling output streams. Looks like one cannot direcly
use a sub-classed output stream, so there is a stream kept as an internal
variable. In addition there is a computed property to return this variable.
That way it can be overwritten by sub classe. Maybe there is a better way to
handle this.</p>
<div class="aside aside-see">
    <p class="aside-title">See</p>
    <a href="https://developer.apple.com/documentation/foundation/outputstream"><code>OutputStream</code></a>

</div>

                        <a href="Classes/WrappedOutputStream.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">class</span> <span class="kt">WrappedOutputStream</span> <span class="p">:</span> <span class="kt">OutputStream</span><span class="p">,</span> <span class="kt">StreamDelegate</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/AppPETs/PrivacyKit/blob/a1b73a6dd5a61a4a07e216bc11ea89f8f5c2f54b/PrivacyKit/Tls.swift#L638-L838">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/c:@M@PrivacyKit@objc(cs)TLSInputStream"></a>
                    <a name="//apple_ref/swift/Class/TLSInputStream" class="dashAnchor"></a>
                    <a class="token" href="#/c:@M@PrivacyKit@objc(cs)TLSInputStream">TLSInputStream</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>This class is TLS encrypted input stream.</p>

                        <a href="Classes/TLSInputStream.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">class</span> <span class="kt">TLSInputStream</span> <span class="p">:</span> <span class="kt"><a href="Classes/WrappedInputStream.html">WrappedInputStream</a></span><span class="p">,</span> <span class="kt"><a href="Protocols/TlsSessionDelegate.html">TlsSessionDelegate</a></span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/AppPETs/PrivacyKit/blob/a1b73a6dd5a61a4a07e216bc11ea89f8f5c2f54b/PrivacyKit/Tls.swift#L843-L1174">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/c:@M@PrivacyKit@objc(cs)TLSOutputStream"></a>
                    <a name="//apple_ref/swift/Class/TLSOutputStream" class="dashAnchor"></a>
                    <a class="token" href="#/c:@M@PrivacyKit@objc(cs)TLSOutputStream">TLSOutputStream</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>This class is TLS encrypted output stream.</p>

                        <a href="Classes/TLSOutputStream.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">class</span> <span class="kt">TLSOutputStream</span> <span class="p">:</span> <span class="kt"><a href="Classes/WrappedOutputStream.html">WrappedOutputStream</a></span><span class="p">,</span> <span class="kt"><a href="Protocols/TlsSessionDelegate.html">TlsSessionDelegate</a></span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/AppPETs/PrivacyKit/blob/a1b73a6dd5a61a4a07e216bc11ea89f8f5c2f54b/PrivacyKit/Tls.swift#L1179-L1425">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/c:@M@PrivacyKit@objc(cs)ConfidentialQrCodeView"></a>
                    <a name="//apple_ref/swift/Class/ConfidentialQrCodeView" class="dashAnchor"></a>
                    <a class="token" href="#/c:@M@PrivacyKit@objc(cs)ConfidentialQrCodeView">ConfidentialQrCodeView</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>This class can be used to share secrets with other devices. A cover image,
that can be set using Interface builder will be displayed and the QR code
will only be uncovered if the user taps or clicks on the image view and
has authenticated himself.</p>

<p>If the cover image is shown, then the user will be asked to authenticate
himself as the owner of the device, e.g., by using Face/Touch ID or by
asking for the device passcode. The authentication is performed by using
the <a href="https://developer.apple.com/documentation/localauthentication"><code>LocalAuthentication</code></a>
framework. Therefore the authentication credentials will be handled by the
operating system an cannot be intercepted by the application.</p>

<p>If the confidential value is shown, tapping on it will invalidate the
authentication context. Therefore, in order to display the confidential
value again, the user has to authenticate as the device owner anew.</p>

                        <a href="Classes/ConfidentialQrCodeView.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">class</span> <span class="kt">ConfidentialQrCodeView</span> <span class="p">:</span> <span class="kt"><a href="Typealiases.html#/ImageView">ImageView</a></span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/AppPETs/PrivacyKit/blob/a1b73a6dd5a61a4a07e216bc11ea89f8f5c2f54b/PrivacyKit/UI/ConfidentialQrCodeView.swift#L56-L187">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:10PrivacyKit10IndicatorsC"></a>
                    <a name="//apple_ref/swift/Class/Indicators" class="dashAnchor"></a>
                    <a class="token" href="#/s:10PrivacyKit10IndicatorsC">Indicators</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>A class that wraps access to indicators, such as network activity.</p>

                        <a href="Classes/Indicators.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">class</span> <span class="kt">Indicators</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/AppPETs/PrivacyKit/blob/a1b73a6dd5a61a4a07e216bc11ea89f8f5c2f54b/PrivacyKit/UI/Indicators.swift#L8-L41">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </section>

      </article>
    </div>
    <section class="footer">
      <p>&copy; 2018 <a class="link" href="https://github.com/AppPETs" target="_blank" rel="external">AppPETs</a>. All rights reserved. (Last updated: 2018-09-27)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.9.3</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
